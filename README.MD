<h1>BÃ i táº­p lá»›n mÃ´n c++</h1>
# Há»‡ Thá»‘ng Quáº£n LÃ½ VÃ­ Äiá»ƒm ThÆ°á»Ÿng ğŸš€

![C++](https://img.shields.io/badge/C++-11-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Status](https://img.shields.io/badge/status-complete-success.svg)

Há»‡ thá»‘ng Quáº£n LÃ½ VÃ­ Äiá»ƒm ThÆ°á»Ÿng lÃ  má»™t á»©ng dá»¥ng console C++ cho phÃ©p quáº£n lÃ½ tÃ i khoáº£n ngÆ°á»i dÃ¹ng vÃ  vÃ­ Ä‘iá»ƒm thÆ°á»Ÿng. NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘Äƒng kÃ½, Ä‘Äƒng nháº­p, chuyá»ƒn Ä‘iá»ƒm, xem sá»‘ dÆ°, cáº­p nháº­t thÃ´ng tin, vÃ  Ä‘á»•i máº­t kháº©u. Quáº£n trá»‹ viÃªn (Admin) cÃ³ quyá»n quáº£n lÃ½ danh sÃ¡ch ngÆ°á»i dÃ¹ng, táº¡o tÃ i khoáº£n má»›i, vÃ  sá»­a thÃ´ng tin. Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong file vÄƒn báº£n, vá»›i cÆ¡ cháº¿ sao lÆ°u vÃ  xÃ¡c thá»±c OTP Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n.

---

## ğŸ“‹ Giá»›i thiá»‡u dá»± Ã¡n

á»¨ng dá»¥ng cung cáº¥p giao diá»‡n console thÃ¢n thiá»‡n vá»›i cÃ¡c tÃ­nh nÄƒng:
- **NgÆ°á»i dÃ¹ng thÆ°á»ng (User)**: Quáº£n lÃ½ vÃ­ cÃ¡ nhÃ¢n, chuyá»ƒn Ä‘iá»ƒm, cáº­p nháº­t thÃ´ng tin.
- **Quáº£n trá»‹ viÃªn (Admin)**: Quáº£n lÃ½ toÃ n bá»™ ngÆ°á»i dÃ¹ng trong há»‡ thá»‘ng.
- **Báº£o máº­t**: MÃ£ hÃ³a máº­t kháº©u, xÃ¡c thá»±c OTP cho cÃ¡c thao tÃ¡c nháº¡y cáº£m.
- **LÆ°u trá»¯**: Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u vÃ o file vá»›i sao lÆ°u tá»± Ä‘á»™ng.

Dá»± Ã¡n sá»­ dá»¥ng thÆ° viá»‡n chuáº©n C++ vÃ  khÃ´ng phá»¥ thuá»™c vÃ o pháº§n má»m bÃªn thá»© ba, phÃ¹ há»£p cho cÃ¡c há»‡ thá»‘ng giÃ¡o dá»¥c hoáº·c quáº£n lÃ½ Ä‘iá»ƒm thÆ°á»Ÿng Ä‘Æ¡n giáº£n.

---

## ğŸ‘¥ ThÃ nh viÃªn tham gia

| TÃªn                  | Vai trÃ²         | Nhiá»‡m vá»¥                                                                           |
|----------------------|-----------------|------------------------------------------------------------------------------------|
| DÆ°Æ¡ng Quang Duy      | ThÃ nh viÃªn      | PhÃ¡t triá»ƒn `main.cpp`,`wallet`,`datastorage`                                       |
| VÅ© Äá»©c Chiáº¿n         | ThÃ nh viÃªn      | PhÃ¡t triá»ƒn `user`,`auth`, `main.cpp`                                               |
| ÄÃ m CÃ´ng Trung       | ThÃ nh viÃªn      | PhÃ¡t triá»ƒn `otp`, `utils`, `main.cpp`                                              |

---

## ğŸ“ PhÃ¢n tÃ­ch vÃ  Ä‘áº·c táº£ chá»©c nÄƒng

### Má»¥c tiÃªu
- Quáº£n lÃ½ vÃ­ Ä‘iá»ƒm thÆ°á»Ÿng an toÃ n, dá»… sá»­ dá»¥ng.
- PhÃ¢n quyá»n rÃµ rÃ ng giá»¯a User vÃ  Admin.
- Äáº£m báº£o tÃ­nh toÃ n váº¹n dá»¯ liá»‡u vá»›i sao lÆ°u vÃ  giao dá»‹ch atom.

### Äáº·c táº£ chá»©c nÄƒng

PhÃ¢n tÃ­ch vÃ  Ä‘áº·c táº£ chá»©c nÄƒng

=> Má»¥c tiÃªu

Cung cáº¥p há»‡ thá»‘ng quáº£n lÃ½ vÃ­ Ä‘iá»ƒm thÆ°á»Ÿng an toÃ n, dá»… sá»­ dá»¥ng.

Há»— trá»£ hai vai trÃ²: User (ngÆ°á»i dÃ¹ng thÃ´ng thÆ°á»ng) vÃ  Admin (quáº£n trá»‹ viÃªn).

Äáº£m báº£o tÃ­nh báº£o máº­t vá»›i xÃ¡c thá»±c OTP cho cÃ¡c thao tÃ¡c nháº¡y cáº£m.

LÆ°u trá»¯ vÃ  sao lÆ°u dá»¯ liá»‡u Ä‘á»ƒ trÃ¡nh máº¥t mÃ¡t.

=> Äáº·c táº£ chá»©c nÄƒng

- ÄÄƒng kÃ½ tÃ i khoáº£n:

Input: TÃªn Ä‘Äƒng nháº­p, máº­t kháº©u (hoáº·c tá»± sinh bá»Ÿi Admin), há» tÃªn, email, sá»‘ Ä‘iá»‡n thoáº¡i.

Output: TÃ i khoáº£n má»›i vá»›i vai trÃ² USER, vÃ­ má»›i vá»›i sá»‘ dÆ° 0.

Xá»­ lÃ½: Kiá»ƒm tra tÃªn Ä‘Äƒng nháº­p trÃ¹ng láº·p, mÃ£ hÃ³a máº­t kháº©u, lÆ°u vÃ o file data/users.txt vÃ  data/wallets.txt.

- ÄÄƒng nháº­p:

Input: TÃªn Ä‘Äƒng nháº­p, máº­t kháº©u.

Output: Truy cáº­p menu ngÆ°á»i dÃ¹ng náº¿u thÃ nh cÃ´ng, yÃªu cáº§u Ä‘á»•i máº­t kháº©u náº¿u máº­t kháº©u tá»± sinh.

Xá»­ lÃ½: XÃ¡c minh máº­t kháº©u mÃ£ hÃ³a, tráº£ vá» con trá» ngÆ°á»i dÃ¹ng.

- Xem sá»‘ dÆ° vÃ­:

Input: KhÃ´ng cÃ³ (dá»±a trÃªn ngÆ°á»i dÃ¹ng hiá»‡n táº¡i).

Output: ID vÃ­ vÃ  sá»‘ dÆ° (Ä‘á»‹nh dáº¡ng => [sá»‘ dÆ°] diem).

Xá»­ lÃ½: TÃ¬m vÃ­ theo tÃªn Ä‘Äƒng nháº­p, hiá»ƒn thá»‹ thÃ´ng tin.

- Xem thÃ´ng tin tÃ i khoáº£n:

Input: KhÃ´ng cÃ³.

Output: Hiá»ƒn thá»‹ username, full_name, email, phone, role.

Xá»­ lÃ½: Láº¥y thÃ´ng tin tá»« Ä‘á»‘i tÆ°á»£ng ngÆ°á»i dÃ¹ng hiá»‡n táº¡i.

- Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n:

Input: Lá»±a chá»n trÆ°á»ng (há» tÃªn, email, sá»‘ Ä‘iá»‡n thoáº¡i), giÃ¡ trá»‹ má»›i, OTP.

Output: Cáº­p nháº­t thÃ´ng tin náº¿u OTP há»£p lá»‡.

Xá»­ lÃ½: XÃ¡c thá»±c OTP, cáº­p nháº­t trÆ°á»ng tÆ°Æ¡ng á»©ng, lÆ°u vÃ o file.

- Äá»•i máº­t kháº©u:

Input: Máº­t kháº©u cÅ©, máº­t kháº©u má»›i, OTP.

Output: Äá»•i máº­t kháº©u náº¿u máº­t kháº©u cÅ© vÃ  OTP há»£p lá»‡.

Xá»­ lÃ½: XÃ¡c minh máº­t kháº©u cÅ©, mÃ£ hÃ³a máº­t kháº©u má»›i, lÆ°u vÃ o file.

- Chuyá»ƒn Ä‘iá»ƒm:

Input: ID vÃ­ Ä‘Ã­ch, sá»‘ Ä‘iá»ƒm, OTP.

Output: Chuyá»ƒn Ä‘iá»ƒm náº¿u Ä‘á»§ sá»‘ dÆ° vÃ  OTP há»£p lá»‡.

Xá»­ lÃ½: Kiá»ƒm tra sá»‘ dÆ°, thá»±c hiá»‡n giao dá»‹ch atom, ghi log giao dá»‹ch.

- Quáº£n lÃ½ ngÆ°á»i dÃ¹ng (Admin):

Input: Lá»±a chá»n (xem danh sÃ¡ch, táº¡o tÃ i khoáº£n, sá»­a thÃ´ng tin), thÃ´ng tin cáº§n thiáº¿t.

Output: Danh sÃ¡ch ngÆ°á»i dÃ¹ng, tÃ i khoáº£n má»›i, hoáº·c thÃ´ng tin cáº­p nháº­t.

Xá»­ lÃ½: Hiá»ƒn thá»‹ danh sÃ¡ch, gá»i registerUser Ä‘á»ƒ táº¡o tÃ i khoáº£n, hoáº·c cáº­p nháº­t thÃ´ng tin vá»›i OTP.

- KhÃ´i phá»¥c tá»« sao lÆ°u:

Input: ÄÆ°á»ng dáº«n file sao lÆ°u cho users.txt vÃ  wallets.txt.

Output: Dá»¯ liá»‡u Ä‘Æ°á»£c khÃ´i phá»¥c náº¿u file há»£p lá»‡.

Xá»­ lÃ½: Sao chÃ©p file sao lÆ°u vÃ o file chÃ­nh, táº£i láº¡i dá»¯ liá»‡u.

### PhÃ¢n tÃ­ch
- **Báº£o máº­t**: Máº­t kháº©u Ä‘Æ°á»£c bÄƒm, OTP yÃªu cáº§u cho cÃ¡c thao tÃ¡c nháº¡y cáº£m.
- **ToÃ n váº¹n**: Giao dá»‹ch atom (rollback náº¿u lÆ°u tháº¥t báº¡i), sao lÆ°u tá»± Ä‘á»™ng.
- **Háº¡n cháº¿**: OTP chá»‰ hiá»ƒn thá»‹ trÃªn mÃ n hÃ¬nh, chÆ°a kiá»ƒm tra Ä‘á»‹nh dáº¡ng email/sá»‘ Ä‘iá»‡n thoáº¡i.
- **Má»Ÿ rá»™ng**: Dá»… dÃ ng thÃªm vai trÃ² má»›i hoáº·c tÃ­ch há»£p gá»­i OTP qua email/SMS.

---

## ğŸ› ï¸ CÃ i Ä‘áº·t
BAI TAP GIUA KY MON C++ CÃ i Äáº·t chÆ°Æ¡ng trÃ¬nh:

1.Táº£i Visual Studio Code

1.1 Truy cáº­p Visual Studio Code.
1.2 Táº£i xuá»‘ng vÃ  cÃ i Ä‘áº·t phiÃªn báº£n phÃ¹ há»£p vá»›i há»‡ Ä‘iá»u hÃ nh cá»§a báº¡n.
2.CÃ i Ä‘áº·t Compiler C++(lÃ m theo link sau) Windows:https://code.visualstudio.com/docs/cpp/config-mingw

3.CÃ i Ä‘áº·t git.

3.1. Truy cáº­p vÃ o https://git-scm.com/downloads/win, vÃ  táº£i 1 trong 2 báº£n "Standalone Installer" tÆ°Æ¡ng thÃ­ch vá»›i mÃ¡y.
3.2. Táº¡o tÃ i khoáº£n trÃªn https://github.com, náº¿u chÆ°a cÃ³.
4.Thiáº¿t láº­p há»‡ thá»‘ng trÃªn github.

4.1. Táº¡o 1 Repositories trÃªn github(https://github.com)
4.2. Truy cáº­p Ä‘Æ°á»ng link https://github.com/chientb02/BTLC-, chá»n má»¥c "code" vÃ  chá»n "download zip".
4.3. Truy váº«n vÃ o Repositories vá»«a táº¡o á»Ÿ bÆ°á»›c 4.1 chá»n "uploading an existing file" vÃ  chá»n nhá»¯ng file vÃ  folder á»Ÿ trong folder(compressed zip) vá»«a táº£i xuá»‘ng á»Ÿ bÆ°á»›c 4.2 kÃ©o vÃ o Ã´ trÆ°á»›c mÃ n hÃ¬nh vÃ  chá»n "commit changes".
5.Thiáº¿t láº­p chÆ°Æ¡ng trÃ¬nh káº¿t ná»‘i vá»›i há»‡ thá»‘ng.

5.1. Táº¡o 1 folder lÆ°u trá»¯ Repositories vá»«a táº¡o á»Ÿ bÆ°á»›c 4.
5.2. Cáº¥u hÃ¬nh Git trÃªn mÃ¡y tÃ­nh:
GÃµ:
git config --global user.name "TÃªn cá»§a báº¡n"
git config --global user.email "email@gmail.com"
Thay "TÃªn cá»§a báº¡n" vÃ  "email@gmail.com" báº±ng tÃªn vÃ  email cá»§a báº¡n Ä‘Ã£ dÃ¹ng trÃªn GitHub.
5.3. Thiáº¿t láº­p Bash lÃ m terminal máº·c Ä‘á»‹nh trong Visual Studio Code
5.3.1.Má»Ÿ VS Code.
5.3.2.Truy cáº­p File > Preferences > Settings (hoáº·c nháº¥n Ctrl + ,).
5.3.3.TÃ¬m "Terminal Integrated Default Profile".
5.3.4.Chá»n Git Bash (hoáº·c Bash) lÃ m terminal máº·c Ä‘á»‹nh.
5.4. Truy váº­y vÃ o folder vá»«a táº¡o á»Ÿ bÆ°á»›c 5.1, click chuá»™t pháº£i > Git Bash
GÃµ:
git init
git branch -M main
git remote add origin "URL cá»§a remote repository vá»«a táº¡o á»Ÿ bÆ°á»›c 4.1"
git pull origin main
6.Äá»ƒ cháº¡y chÆ°Æ¡ng trÃ¬nh vÃ o folder vá»«a táº¡o á»Ÿ bÆ°á»›c 5.1 vÃ  double click vÃ o run.bat Ä‘á»ƒ sá»­ dá»¥ng.

### Cáº¥u trÃºc thÆ° má»¥c
```
reward-wallet-system/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ users.txt           # LÆ°u thÃ´ng tin ngÆ°á»i dÃ¹ng
â”‚   â”œâ”€â”€ wallets.txt         # LÆ°u thÃ´ng tin vÃ­
â”‚   â”œâ”€â”€ transactions.txt    # Log giao dá»‹ch
â”‚   â””â”€â”€ backup/             # File sao lÆ°u
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.cpp            # Menu vÃ  luá»“ng Ä‘iá»u khiá»ƒn
â”‚   â”œâ”€â”€ user.h/cpp         # Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
â”‚   â”œâ”€â”€ wallet.h/cpp       # Quáº£n lÃ½ vÃ­
â”‚   â”œâ”€â”€ auth.h/cpp         # XÃ¡c thá»±c vÃ  mÃ£ hÃ³a
â”‚   â”œâ”€â”€ otp.h/cpp          # Táº¡o/xÃ¡c thá»±c OTP
â”‚   â”œâ”€â”€ datastorage.h/cpp  # LÆ°u trá»¯ dá»¯ liá»‡u
â””â”€â”€ README.md              # HÆ°á»›ng dáº«n
```

### BiÃªn dá»‹ch
1. Táº¡o thÆ° má»¥c dá»¯ liá»‡u:
   ```bash
   mkdir -p data/backup
   ```
2. BiÃªn dá»‹ch:
   ```bash
   g++ -std=c++11 src/main.cpp src/user.cpp src/wallet.cpp src/auth.cpp src/otp.cpp src/datastorage.cpp -o reward_wallet
   g++ main.cpp user.cpp wallet.cpp auth.cpp datastorage.cpp utils.cpp otp.cpp -lssl -lcrypto -o app
   ```

---

## â–¶ï¸ Cháº¡y chÆ°Æ¡ng trÃ¬nh

### Lá»‡nh cháº¡y
- Linux/macOS:
  ```bash
  ./reward_wallet
  ```
- Windows:
  ```bash
  reward_wallet.exe
  ```

### Thao tÃ¡c
1. **Menu chÃ­nh**:
   ```plaintext
   ==================================================
   | HE THONG QUAN LY VI DIEM THUONG                |
   ==================================================
   | 1. Dang ky                                     |
   | 2. Dang nhap                                   |
   | 3. Khoi phuc tu sao luu                        |
   | 4. Thoat                                       |
   ==================================================
   Lua chon: 
   ```
   - **1**: ÄÄƒng kÃ½ tÃ i khoáº£n.
   - **2**: ÄÄƒng nháº­p.
   - **3**: KhÃ´i phá»¥c dá»¯ liá»‡u.
   - **4**: ThoÃ¡t.

2. **VÃ­ dá»¥ Ä‘Äƒng kÃ½**:
   ```plaintext
   Nhap ten dang nhap: duy
   Nhap mat khau: pass123
   Nhap ho ten: Nguyen Van Duy
   Nhap email: duy@example.com
   Nhap so dien thoai: 123456789
   Dang ky thanh cong!
   Vi cua ban co ID: W1234
   ```

3. **VÃ­ dá»¥ Ä‘Äƒng nháº­p**:
   ```plaintext
   Ten dang nhap: duy
   Mat khau: pass123
   Dang nhap thanh cong!
   ```

4. **Menu ngÆ°á»i dÃ¹ng (User)**:
   ```plaintext
   | 1. Xem so du vi                        |
   | 2. Chuyen diem                         |
   | 3. Xem thong tin tai khoan             |
   | 4. Cap nhat thong tin ca nhan          |
   | 5. Doi mat khau                        |
   | 6. Dang xuat                           |
   ```
   - **Admin** cÃ³ thÃªm tÃ¹y chá»n "6. Quan ly nguoi dung".

5. **VÃ­ dá»¥ xem sá»‘ dÆ°**:
   ```plaintext
   Vi ID: W1234
   So du: => 0 diem
   ```

6. **VÃ­ dá»¥ cáº­p nháº­t email**:
   ```plaintext
   Lua chon: 2
   Nhap email moi: new@example.com
   Ma OTP (gui den duy@example.com): 123456
   Nhap ma OTP: 123456
   Cap nhat email thanh cong.
   ```

---

## ğŸ’» MÃ£ nguá»“n

### Tá»•ng quan
- **main.cpp**: Äiá»u khiá»ƒn menu, gá»i cÃ¡c hÃ m chá»©c nÄƒng.
- **user.h/cpp**: Quáº£n lÃ½ thÃ´ng tin ngÆ°á»i dÃ¹ng (username, full_name, email, v.v.).
- **wallet.h/cpp**: Quáº£n lÃ½ vÃ­ (ID, sá»‘ dÆ°, chá»§ sá»Ÿ há»¯u).
- **auth.h/cpp**: XÃ¡c thá»±c (bÄƒm máº­t kháº©u, kiá»ƒm tra Ä‘Äƒng nháº­p).
- **otp.h/cpp**: Táº¡o vÃ  xÃ¡c thá»±c OTP.
- **datastorage.h/cpp**: LÆ°u trá»¯ vÃ  sao lÆ°u dá»¯ liá»‡u.

### TrÃ­ch Ä‘oáº¡n mÃ£ (main.cpp)
```cpp
// In tiÃªu Ä‘á» vá»›i viá»n
// Input: Chuá»—i tiÃªu Ä‘á»
// Output: TiÃªu Ä‘á» Ä‘Æ°á»£c cÄƒn giá»¯a trong khung
void printTitle(const string& title) {
    printLine();
    cout << "| " << setw(46) << left << title << " |\n";
    printLine();
}

// Xem sá»‘ dÆ° vÃ­
// Input: Con trá» ngÆ°á»i dÃ¹ng
// Output: ID vÃ­, sá»‘ dÆ° (Ä‘á»‹nh dáº¡ng => [sá»‘ dÆ°] diem)
void viewBalance(User* user) {
    printTitle("SO DU VI");
    for (const auto& wallet : wallets) {
        if (wallet.ownerUsername == user->username) {
            cout << "Vi ID: " << wallet.walletId << "\n";
            cout << "So du: => " << wallet.balance << " diem\n";
            return;
        }
    }
    cout << "Khong tim thay vi.\n";
}
```

### Xá»­ lÃ½
- **Input**: Chuá»—i (username, email), sá»‘ (sá»‘ Ä‘iá»ƒm, lá»±a chá»n), kÃ½ tá»± (y/n).
- **Output**: ThÃ´ng bÃ¡o console, file dá»¯ liá»‡u (`users.txt`, `wallets.txt`).
- **Thá»§ tá»¥c**: Kiá»ƒm tra Ä‘áº§u vÃ o, xÃ¡c thá»±c OTP, lÆ°u trá»¯ atom, sao lÆ°u tá»± Ä‘á»™ng.

---

## ğŸ“š TÃ i liá»‡u tham kháº£o
- [C++ Reference](https://en.cppreference.com/w/) - ThÆ° viá»‡n chuáº©n C++.
- [Stack Overflow](https://stackoverflow.com/questions/25020129/cin-ignore-numeric-limitsstreamsizemax-n) - Xá»­ lÃ½ bá»™ Ä‘á»‡m `cin`.
- [GeeksforGeeks](https://www.geeksforgeeks.org/how-to-print-a-table-in-c/) - Thiáº¿t káº¿ báº£ng console.
- [OWASP](https://owasp.org/www-community/password-hashing) - MÃ£ hÃ³a máº­t kháº©u.

---

## âš ï¸ LÆ°u Ã½
- Táº¡o thÆ° má»¥c `data/` vÃ  `data/backup/` trÆ°á»›c khi cháº¡y.
- OTP hiá»ƒn thá»‹ trÃªn mÃ n hÃ¬nh; cáº§n thÆ° viá»‡n nhÆ° `libcurl` Ä‘á»ƒ gá»­i email/SMS.
- CÃ³ thá»ƒ thÃªm kiá»ƒm tra Ä‘á»‹nh dáº¡ng email (chá»©a `@`) hoáº·c sá»‘ Ä‘iá»‡n thoáº¡i (chá»‰ sá»‘).
